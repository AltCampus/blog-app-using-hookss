{"ast":null,"code":"import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import baseurl from\"../utils/constants\";import Loading from\"./loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ArticlesFeed=/*#__PURE__*/function(_React$Component){_inherits(ArticlesFeed,_React$Component);var _super=_createSuper(ArticlesFeed);function ArticlesFeed(){var _this;_classCallCheck(this,ArticlesFeed);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:\"\",user:null};_this.favoriteArticle=function(slug,favorited){if(_this.state.user){fetch(\"\".concat(baseurl,\"/api/articles/\").concat(slug,\"/favorite\"),{method:favorited?\"DELETE\":\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(_this.props.user.token)}}).then(function(res){if(!res.ok){throw new Error(\"can't mark as favorite article\");}return res.json();}).then(function(article){_this.props.handleState(\"myfeed\",false);if(_this.props.match.params.username){_this.props.handleState(\"myfeed\",_this.props.myfeed);}}).catch(function(errors){_this.setState({error:errors.error});});}else{alert(\"you have to log in first\");}};return _this;}_createClass(ArticlesFeed,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.user){this.setState({user:this.props.user,error:this.props.error});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.error!==this.props.error){this.setState({error:this.props.error});}}},{key:\"render\",value:function render(){var _this2=this;var articles=this.props.articles;return/*#__PURE__*/_jsxs(\"section\",{className:\"articles\",children:[articles&&articles.length<1?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-4 text-xl capitalize\",children:\"no articles to show\"}):\"\",articles&&!this.state.error?articles.map(function(article,i){return/*#__PURE__*/_jsx(ArticleFeed,{favoriteArticle:_this2.favoriteArticle,article:article},i);}):this.state.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-4 text-xl capitalize\",children:\"no articles to show\"}):/*#__PURE__*/_jsx(Loading,{})]});}}]);return ArticlesFeed;}(React.Component);function ArticleFeed(props){var article=props.article.article;return/*#__PURE__*/_jsxs(\"div\",{className:\"article justify-between flex p-8 m-4 border-2 border-solid rounded-lg border-blue-900\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/5\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/articles/\".concat(article.slug),children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl hover:underline pink\",children:article.title})}),/*#__PURE__*/_jsx(NavLink,{to:\"/profiles/\".concat(article.author.username),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex hover:underline blue  py-2 items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"h-8 w-8 mr-2 rounded-full\",src:article.author.image,alt:article.author.username}),/*#__PURE__*/_jsx(\"h4\",{className:\"blue hover:scale-105\",children:article.author.username})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-l py-2\",children:article.description}),/*#__PURE__*/_jsx(NavLink,{className:\"text-blue-400 read-more mt-4 inline-block border-2 border-solid rounded-lg py-1 px-2 border-blue-400\",to:\"/articles/\".concat(article.slug),children:\"Read More\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){props.favoriteArticle(article.slug,article.favorited);},className:\"rounded-lg border-solid border-2 favorite \".concat(article.favorited?\"border-red-600\":\"border-green-600\",\" py-1 px-2\"),children:[article.favorited?\"\\u2764\\uFE0F \":\"\\uD83D\\uDC9A \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm \".concat(article.favorited?\"text-red-600\":\"text-green-600\"),children:article.favoritesCount})]})})]});}export default withRouter(ArticlesFeed);","map":{"version":3,"names":["React","NavLink","withRouter","baseurl","Loading","ArticlesFeed","state","error","user","favoriteArticle","slug","favorited","fetch","method","headers","authorization","props","token","then","res","ok","Error","json","article","handleState","match","params","username","myfeed","catch","errors","setState","alert","articles","length","map","i","Component","ArticleFeed","title","author","image","description","favoritesCount"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/articlesFeed.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\nimport Loading from \"./loading\";\n\nclass ArticlesFeed extends React.Component {\n  state = {\n    error: \"\",\n    user: null,\n  };\n  componentDidMount() {\n    if (this.props.user) {\n      this.setState({\n        user: this.props.user,\n        error: this.props.error,\n      });\n    }\n  }\n  componentDidUpdate() {\n    if (this.state.error !== this.props.error) {\n      this.setState({\n        error: this.props.error,\n      });\n    }\n  }\n  favoriteArticle = (slug, favorited) => {\n    if (this.state.user) {\n      fetch(`${baseurl}/api/articles/${slug}/favorite`, {\n        method: favorited ? \"DELETE\" : \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `${this.props.user.token}`,\n        },\n      })\n        .then((res) => {\n          if (!res.ok) {\n            throw new Error(\"can't mark as favorite article\");\n          }\n          return res.json();\n        })\n        .then((article) => {\n          this.props.handleState(\"myfeed\", false);\n          if (this.props.match.params.username) {\n            this.props.handleState(\"myfeed\", this.props.myfeed);\n          }\n        })\n        .catch((errors) => {\n          this.setState({\n            error: errors.error,\n          });\n        });\n    } else {\n      alert(\"you have to log in first\");\n    }\n  };\n  render() {\n    let articles = this.props.articles;\n    return (\n      <section className=\"articles\">\n        {articles && articles.length < 1 ? (\n          <p className=\"text-center my-4 text-xl capitalize\">\n            no articles to show\n          </p>\n        ) : (\n          \"\"\n        )}\n        {articles && !this.state.error ? (\n          articles.map((article, i) => {\n            return (\n              <ArticleFeed\n                favoriteArticle={this.favoriteArticle}\n                article={article}\n                key={i}\n              />\n            );\n          })\n        ) : this.state.error ? (\n          <p className=\"text-center my-4 text-xl capitalize\">\n            no articles to show\n          </p>\n        ) : (\n          <Loading />\n        )}\n      </section>\n    );\n  }\n}\n\nfunction ArticleFeed(props) {\n  const article = props.article.article;\n  return (\n    <div className=\"article justify-between flex p-8 m-4 border-2 border-solid rounded-lg border-blue-900\">\n      <div className=\"w-4/5\">\n        <NavLink to={`/articles/${article.slug}`}>\n          <h3 className=\"text-2xl hover:underline pink\">{article.title}</h3>\n        </NavLink>\n        <NavLink to={`/profiles/${article.author.username}`}>\n          <div className=\"flex hover:underline blue  py-2 items-center\">\n            <img\n              className=\"h-8 w-8 mr-2 rounded-full\"\n              src={article.author.image}\n              alt={article.author.username}\n            ></img>\n            <h4 className=\"blue hover:scale-105\">{article.author.username}</h4>\n          </div>\n        </NavLink>\n        <p className=\"text-l py-2\">{article.description}</p>\n        <NavLink\n          className=\"text-blue-400 read-more mt-4 inline-block border-2 border-solid rounded-lg py-1 px-2 border-blue-400\"\n          to={`/articles/${article.slug}`}\n        >\n          Read More\n        </NavLink>\n      </div>\n      <div>\n        <button\n          onClick={() => {\n            props.favoriteArticle(article.slug, article.favorited);\n          }}\n          className={`rounded-lg border-solid border-2 favorite ${\n            article.favorited ? \"border-red-600\" : \"border-green-600\"\n          } py-1 px-2`}\n        >\n          {article.favorited ? `‚ù§Ô∏è ` : `üíö `}\n          <span\n            className={`text-sm ${\n              article.favorited ? \"text-red-600\" : \"text-green-600\"\n            }`}\n          >\n            {article.favoritesCount}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(ArticlesFeed);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}