{"ast":null,"code":"var _jsxFileName = \"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/comment.js\";\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super();\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      let {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n    this.checkInput = () => {\n      let {\n        comment\n      } = this.state;\n      if (!comment) {\n        this.setState({\n          error: \"comment required to add*\"\n        });\n      }\n    };\n    this.addComment = () => {\n      let {\n        comment\n      } = this.state;\n      fetch(`https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Token ${this.props.user.token}`\n        },\n        body: JSON.stringify({\n          comment: {\n            body: comment\n          }\n        })\n      }).then(res => {\n        if (!res.ok) {\n          throw new Error(\"cant add new comment\");\n        }\n        return res.json();\n      }).then(comment => {\n        this.setState({\n          comment: \"\"\n        }, () => {\n          this.fetchComments();\n        });\n      }).catch(errors => {\n        this.setState({\n          error: errors.error\n        });\n      });\n    };\n    this.fetchComments = () => {\n      fetch(`https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`).then(res => {\n        if (!res.ok) {\n          throw new Error(\"cant fetch comments\");\n        }\n        return res.json();\n      }).then(comments => {\n        this.setState({\n          comments: comments.comments\n        });\n      }).catch(errors => {\n        this.setState({\n          error: errors.error\n        });\n      });\n    };\n    this.state = {\n      comment: \"\",\n      error: \"\",\n      comments: []\n    };\n  }\n  componentDidMount() {\n    this.fetchComments();\n  }\n  render() {\n    let {\n      comment,\n      error\n    } = this.state;\n    let formControlClass = \"text-sm rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" w-1/3 mx-auto\",\n      children: [this.props.user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: event => {\n            event.preventDefault();\n            this.checkInput();\n            if (!error) {\n              this.addComment();\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 text-sm\",\n            children: this.state.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: formControlClass,\n            placeholder: \"Write comment\",\n            rows: 3,\n            onChange: this.handleInput,\n            value: comment,\n            name: \"comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Add Comment\",\n            className: `bg-blue-300 blue ${formControlClass}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-base m-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-500\",\n            children: \"SignIn/SignUp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), \" to add\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-500\",\n            children: \" Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"blue text-lg m-4 text-center\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), this.state.comments.map((comment, i) => {\n          return /*#__PURE__*/_jsxDEV(SingleComment, {\n            comment: comment\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n}\nfunction SingleComment(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"blue\",\n      children: props.comment.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"address\", {\n      className: \"text-xs\",\n      children: props.comment.author.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"date\", {\n      className: \"text-xs my-0\",\n      children: props.comment.createdAt.slice(0, 10)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n_c = SingleComment;\nvar _c;\n$RefreshReg$(_c, \"SingleComment\");","map":{"version":3,"names":["React","NavLink","Comment","Component","constructor","props","handleInput","target","name","value","setState","checkInput","comment","state","error","addComment","fetch","slug","method","headers","authorization","user","token","body","JSON","stringify","then","res","ok","Error","json","fetchComments","catch","errors","comments","componentDidMount","render","formControlClass","event","preventDefault","map","i","SingleComment","author","username","createdAt","slice"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/comment.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super();\n    this.state = {\n      comment: \"\",\n      error: \"\",\n      comments: [],\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    let { comment } = this.state;\n    if (!comment) {\n      this.setState({\n        error: \"comment required to add*\",\n      });\n    }\n  };\n  componentDidMount() {\n    this.fetchComments();\n  }\n  addComment = () => {\n    let { comment } = this.state;\n    fetch(\n      `https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Token ${this.props.user.token}`,\n        },\n        body: JSON.stringify({\n          comment: {\n            body: comment,\n          },\n        }),\n      }\n    )\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant add new comment\");\n        }\n        return res.json();\n      })\n      .then((comment) => {\n        this.setState(\n          {\n            comment: \"\",\n          },\n          () => {\n            this.fetchComments();\n          }\n        );\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  fetchComments = () => {\n    fetch(\n      `https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`\n    )\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant fetch comments\");\n        }\n        return res.json();\n      })\n      .then((comments) => {\n        this.setState({\n          comments: comments.comments,\n        });\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  render() {\n    let { comment, error } = this.state;\n    let formControlClass =\n      \"text-sm rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n\n    return (\n      <div className=\" w-1/3 mx-auto\">\n        {this.props.user ? (\n          <>\n            <form\n              onSubmit={(event) => {\n                event.preventDefault();\n                this.checkInput();\n                if (!error) {\n                  this.addComment();\n                }\n              }}\n            >\n              <span className=\"text-red-500 text-sm\">{this.state.error}</span>\n              <textarea\n                className={formControlClass}\n                placeholder=\"Write comment\"\n                rows={3}\n                onChange={this.handleInput}\n                value={comment}\n                name=\"comment\"\n              ></textarea>\n              <input\n                type=\"submit\"\n                value=\"Add Comment\"\n                className={`bg-blue-300 blue ${formControlClass}`}\n              ></input>\n            </form>\n          </>\n        ) : (\n          <NavLink to={\"/login\"}>\n            <p className=\"text-base m-4 text-center\">\n              <span className=\"text-green-500\">SignIn/SignUp</span> to add\n              <span className=\"text-green-500\"> Comment</span>\n            </p>\n          </NavLink>\n        )}\n        <div>\n          <h4 className=\"blue text-lg m-4 text-center\">Comments</h4>\n          {this.state.comments.map((comment, i) => {\n            return <SingleComment key={i} comment={comment} />;\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction SingleComment(props) {\n  return (\n    <div className=\"my-3\">\n      <p className=\"blue\">{props.comment.body}</p>\n      <address className=\"text-xs\">{props.comment.author.username}</address>\n      <date className=\"text-xs my-0\">\n        {props.comment.createdAt.slice(0, 10)}\n      </date>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}