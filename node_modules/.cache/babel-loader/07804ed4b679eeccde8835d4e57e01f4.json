{"ast":null,"code":"var _jsxFileName = \"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/login.js\";\nimport React from \"react\";\nimport { NavLink, Redirect } from \"react-router-dom\";\nimport validate from \"../utils/validate\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      var {\n        name,\n        value\n      } = target;\n      let errors = this.state.errors;\n      validate(errors, name, value);\n      this.setState({\n        errors,\n        [name]: value\n      });\n    };\n    this.checkInput = () => {\n      if (!this.state.email || !this.state.password) {\n        this.setState({\n          errors: {\n            email: \"required email/password\"\n          }\n        });\n      }\n    };\n    this.login = () => {\n      fetch(`https://mighty-oasis-08080.herokuapp.com/api/users/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            email: `${this.state.email}`,\n            password: `${this.state.password}`\n          }\n        })\n      }).then(res => {\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        return res.json();\n      }).then(user => {\n        if (user && user.errors) {\n          this.setState({\n            errors: {\n              email: `${user.errors[\"email or password\"]}`\n            }\n          });\n        } else if (user && user.user) {\n          this.setState({\n            loggedIn: true\n          });\n          localStorage.setItem(\"user\", JSON.stringify(user.user));\n          this.props.handleLogIn(user.user);\n        }\n      }).catch(err => console.log(err));\n    };\n    this.state = {\n      email: null,\n      password: null,\n      loggedIn: false,\n      errors: {\n        password: \"\",\n        email: \"\"\n      }\n    };\n  }\n  render() {\n    let {\n      email,\n      password\n    } = this.state.errors;\n    let {\n      Email,\n      Password\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.state.loggedIn ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 32\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login flex-col p-12 flex justify-center items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl p-2 blue\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 text-lg\",\n            children: \"Don't have account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/signup\",\n            className: \"text-green-500 text-xl underline px-2\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex flex-col\",\n          onSubmit: event => {\n            event.preventDefault();\n            this.checkInput();\n            this.login();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg text-red-600 py-1\",\n            children: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Email\",\n            onChange: this.handleInput,\n            className: \"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",\n            type: \"text\",\n            name: \"email\",\n            value: Email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg text-red-600 py-1\",\n            children: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Password\",\n            onChange: this.handleInput,\n            type: \"password\",\n            name: \"password\",\n            value: Password,\n            className: \"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-green-900 text-green-900 bg-green-100\",\n            type: \"submit\",\n            value: \"Login\",\n            disabled: email || password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default Login;","map":{"version":3,"names":["React","NavLink","Redirect","validate","Login","Component","constructor","handleInput","target","name","value","errors","state","setState","checkInput","email","password","login","fetch","method","headers","body","JSON","stringify","user","then","res","ok","Error","statusText","json","loggedIn","localStorage","setItem","props","handleLogIn","catch","err","console","log","render","Email","Password","event","preventDefault"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/login.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink, Redirect } from \"react-router-dom\";\nimport validate from \"../utils/validate\";\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: null,\n      password: null,\n      loggedIn: false,\n      errors: {\n        password: \"\",\n        email: \"\",\n      },\n    };\n  }\n\n  handleInput = ({ target }) => {\n    var { name, value } = target;\n    let errors = this.state.errors;\n    validate(errors, name, value);\n    this.setState({\n      errors,\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    if (!this.state.email || !this.state.password) {\n      this.setState({\n        errors: {\n          email: \"required email/password\",\n        },\n      });\n    }\n  };\n  login = () => {\n    fetch(`https://mighty-oasis-08080.herokuapp.com/api/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          email: `${this.state.email}`,\n          password: `${this.state.password}`,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        return res.json();\n      })\n      .then((user) => {\n        if (user && user.errors) {\n          this.setState({\n            errors: {\n              email: `${user.errors[\"email or password\"]}`,\n            },\n          });\n        } else if (user && user.user) {\n          this.setState({\n            loggedIn: true,\n          });\n          localStorage.setItem(\"user\", JSON.stringify(user.user));\n          this.props.handleLogIn(user.user);\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n  render() {\n    let { email, password } = this.state.errors;\n    let { Email, Password } = this.state;\n    return (\n      <>\n        {this.state.loggedIn ? <Redirect to=\"/\" /> : \"\"}\n        <div className=\"login flex-col p-12 flex justify-center items-center\">\n          <h2 className=\"text-2xl p-2 blue\">Login</h2>\n          <div className=\"flex flex-row\">\n            <p className=\"text-red-500 text-lg\">Don't have account?</p>\n            <NavLink\n              to=\"/signup\"\n              className={\"text-green-500 text-xl underline px-2\"}\n            >\n              Sign up\n            </NavLink>\n          </div>\n          <form\n            className=\"flex flex-col\"\n            onSubmit={(event) => {\n              event.preventDefault();\n              this.checkInput();\n              this.login();\n            }}\n          >\n            <span className=\"text-lg text-red-600 py-1\">{email}</span>\n            <input\n              placeholder=\"Enter Email\"\n              onChange={this.handleInput}\n              className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n              type=\"text\"\n              name=\"email\"\n              value={Email}\n            ></input>\n            <span className=\"text-lg text-red-600 py-1\">{password}</span>\n            <input\n              placeholder=\"Enter Password\"\n              onChange={this.handleInput}\n              type=\"password\"\n              name=\"password\"\n              value={Password}\n              className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n            ></input>\n            <input\n              className=\"text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-green-900 text-green-900 bg-green-100\"\n              type=\"submit\"\n              value=\"Login\"\n              disabled={email || password}\n            ></input>\n          </form>\n        </div>\n      </>\n    );\n  }\n}\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}