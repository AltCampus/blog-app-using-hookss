{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import validate from\"../utils/validate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Settings=/*#__PURE__*/function(_React$Component){_inherits(Settings,_React$Component);var _super=_createSuper(Settings);function Settings(){var _this;_classCallCheck(this,Settings);_this=_super.call(this);_this.handleInput=function(_ref){var target=_ref.target;var error=_this.state.error;var name=target.name,value=target.value;if(name===\"email\"){validate(error,name,value);}_this.setState(_defineProperty({},name,value));};_this.updateDetails=function(){var Password=_this.state.password?\"password: this.state.password\":\"\";var _this$state=_this.state,imageURL=_this$state.imageURL,username=_this$state.username,bio=_this$state.bio,email=_this$state.email;fetch(\"/api/user\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(_this.props.token)},body:JSON.stringify({user:{image:imageURL,username:username,bio:bio,email:email,Password:Password}})}).then(function(res){console.log(res);if(!res.ok){return res.json().then(function(_ref2){var errors=_ref2.errors;return Promise.reject(errors);});}return res.json();}).then(function(user){_this.props.updateUser(user.user);}).catch(function(errors){_this.setState({error:errors.error});});};_this.state={username:\"\",imageURL:\"\",email:\"\",bio:\"\",password:\"\",error:\"\"};return _this;}_createClass(Settings,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props$user=this.props.user,image=_this$props$user.image,username=_this$props$user.username,bio=_this$props$user.bio,email=_this$props$user.email;this.setState({username:username,email:email,bio:bio,imageURL:image});}},{key:\"render\",value:function render(){var _this2=this;var formControlClass=\"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";var _this$state2=this.state,imageURL=_this$state2.imageURL,username=_this$state2.username,bio=_this$state2.bio,password=_this$state2.password,email=_this$state2.email;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-creme pb-32\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"capitalize text-2xl text-center p-4 blue \",children:\"add article\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mx-auto w-2/5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();validate(_this2.state.error,email,_this2.state.email);if(_this2.state.error){return _this2.setState({error:\"check email\"});}_this2.updateDetails();},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter profile picture URL\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"imageURL\",value:imageURL}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter username\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"username\",value:username}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter email\",onChange:this.handleInput,className:formControlClass,type:\"email\",name:\"email\",value:email}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Enter bio\",onChange:this.handleInput,className:formControlClass,name:\"bio\",value:bio,rows:3}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter new password\",onChange:this.handleInput,className:formControlClass,type:\"password\",name:\"password\",value:password}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Details\",className:\"text-lg rounded-md w-full py-1 px-4 bg-blue-300 blue my-2 border-2 border-solid border-blue-900 text-blue-900\"})]})})]});}}]);return Settings;}(React.Component);export default Settings;","map":{"version":3,"names":["React","validate","Settings","handleInput","target","error","state","name","value","setState","updateDetails","Password","password","imageURL","username","bio","email","fetch","method","headers","authorization","props","token","body","JSON","stringify","user","image","then","res","console","log","ok","json","errors","Promise","reject","updateUser","catch","formControlClass","event","preventDefault","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/settings.js"],"sourcesContent":["import React from \"react\";\nimport validate from \"../utils/validate\";\n\nclass Settings extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      username: \"\",\n      imageURL: \"\",\n      email: \"\",\n      bio: \"\",\n      password: \"\",\n      error: \"\",\n    };\n  }\n  componentDidMount() {\n    let { image, username, bio, email } = this.props.user;\n    this.setState({\n      username: username,\n      email: email,\n      bio: bio,\n      imageURL: image,\n    });\n  }\n  handleInput = ({ target }) => {\n    let error = this.state.error;\n    let { name, value } = target;\n    if (name === \"email\") {\n      validate(error, name, value);\n    }\n    this.setState({\n      [name]: value,\n    });\n  };\n  updateDetails = () => {\n    let Password = this.state.password ? `password: this.state.password` : \"\";\n    let { imageURL, username, bio, email } = this.state;\n    fetch(`/api/user`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `${this.props.token}`,\n      },\n      body: JSON.stringify({\n        user: {\n          image: imageURL,\n          username: username,\n          bio: bio,\n          email: email,\n          Password,\n        },\n      }),\n    })\n      .then((res) => {\n        console.log(res);\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      })\n      .then((user) => {\n        this.props.updateUser(user.user);\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  render() {\n    let formControlClass =\n      \"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n    let { imageURL, username, bio, password, email } = this.state;\n    return (\n      <div className=\"bg-creme pb-32\">\n        <h2 className=\"capitalize text-2xl text-center p-4 blue \">\n          add article\n        </h2>\n        <div className=\"text-center mx-auto w-2/5\">\n          <form\n            onSubmit={(event) => {\n              event.preventDefault();\n              validate(this.state.error, email, this.state.email);\n              if (this.state.error) {\n                return this.setState({ error: \"check email\" });\n              }\n              this.updateDetails();\n            }}\n          >\n            <input\n              placeholder=\"Enter profile picture URL\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"imageURL\"\n              value={imageURL}\n            ></input>\n            <input\n              placeholder=\"Enter username\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"username\"\n              value={username}\n            ></input>\n            <input\n              placeholder=\"Enter email\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"email\"\n              name=\"email\"\n              value={email}\n            ></input>\n            <textarea\n              placeholder=\"Enter bio\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              name=\"bio\"\n              value={bio}\n              rows={3}\n            ></textarea>\n            <input\n              placeholder=\"Enter new password\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"password\"\n              name=\"password\"\n              value={password}\n            ></input>\n            <input\n              type=\"submit\"\n              value=\"Update Details\"\n              className=\"text-lg rounded-md w-full py-1 px-4 bg-blue-300 blue my-2 border-2 border-solid border-blue-900 text-blue-900\"\n            ></input>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}