{"ast":null,"code":"var _jsxFileName = \"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/comment.js\";\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet commentUrl;\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super();\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      let {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n    this.checkInput = () => {\n      let {\n        comment\n      } = this.state;\n      if (!comment) {\n        this.setState({\n          error: \"comment required to add*\"\n        });\n      }\n    };\n    this.addComment = () => {\n      let {\n        comment\n      } = this.state;\n      fetch(commentUrl, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Token ${this.props.user.token}`\n        },\n        body: JSON.stringify({\n          comment: {\n            body: comment\n          }\n        })\n      }).then(res => {\n        if (!res.ok) {\n          throw new Error(\"cant add new comment\");\n        }\n        return res.json();\n      }).then(comment => {\n        this.setState({\n          comment: \"\"\n        }, () => {\n          this.fetchComments();\n        });\n      }).catch(errors => {\n        this.setState({\n          error: errors.error\n        });\n      });\n    };\n    this.fetchComments = () => {\n      fetch(commentUrl).then(res => {\n        if (!res.ok) {\n          throw new Error(\"cant fetch comments\");\n        }\n        return res.json();\n      }).then(comments => {\n        this.setState({\n          comments: comments.comments\n        });\n      }).catch(errors => {\n        this.setState({\n          error: errors.error\n        });\n      });\n    };\n    this.state = {\n      comment: \"\",\n      error: \"\",\n      comments: []\n    };\n  }\n  componentDidMount() {\n    commentUrl = `https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`;\n    this.fetchComments();\n  }\n  render() {\n    let {\n      comment,\n      error\n    } = this.state;\n    let formControlClass = \"text-sm rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" w-1/3 mx-auto\",\n      children: [this.props.user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: event => {\n            event.preventDefault();\n            this.checkInput();\n            if (!error) {\n              this.addComment();\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 text-sm\",\n            children: this.state.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: formControlClass,\n            placeholder: \"Write comment\",\n            rows: 3,\n            onChange: this.handleInput,\n            value: comment,\n            name: \"comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Add Comment\",\n            className: `bg-blue-300 blue ${formControlClass}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-base m-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-500\",\n            children: \"SignIn/SignUp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), \" to add\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-500\",\n            children: \" Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"blue text-lg m-4 text-center\",\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), this.state.comments.map((comment, i) => {\n          return /*#__PURE__*/_jsxDEV(SingleComment, {\n            user: this.props.user,\n            comment: comment\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n}\nclass SingleComment extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.deleteComment = () => {\n      fetch(`${commentUrl}/${this.props.comment.id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Token ${this.props.user.token}`\n        }\n      }).then(res => {\n        if (!res.ok) {\n          throw new Error(\"cant delete comment\");\n        }\n        return res.json();\n      }).then(comment => {\n        console.log(comment);\n      });\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-3 comment flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"blue text-base\",\n          children: this.props.comment.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"address\", {\n          className: \"text-xs capitalize\",\n          children: this.props.comment.author.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs -mt-4\",\n          children: this.props.comment.createdAt.slice(0, 10)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), this.props.user.username === this.props.comment.author.username ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.deleteComment,\n        className: \"text-red-500 text-xs\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-trash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","NavLink","commentUrl","Comment","Component","constructor","props","handleInput","target","name","value","setState","checkInput","comment","state","error","addComment","fetch","method","headers","authorization","user","token","body","JSON","stringify","then","res","ok","Error","json","fetchComments","catch","errors","comments","componentDidMount","slug","render","formControlClass","event","preventDefault","map","i","SingleComment","deleteComment","id","console","log","author","username","createdAt","slice"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/comment.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nlet commentUrl;\n\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super();\n    this.state = {\n      comment: \"\",\n      error: \"\",\n      comments: [],\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    let { comment } = this.state;\n    if (!comment) {\n      this.setState({\n        error: \"comment required to add*\",\n      });\n    }\n  };\n  componentDidMount() {\n    commentUrl = `https://mighty-oasis-08080.herokuapp.com/api/articles/${this.props.slug}/comments`;\n    this.fetchComments();\n  }\n  addComment = () => {\n    let { comment } = this.state;\n    fetch(commentUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Token ${this.props.user.token}`,\n      },\n      body: JSON.stringify({\n        comment: {\n          body: comment,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant add new comment\");\n        }\n        return res.json();\n      })\n      .then((comment) => {\n        this.setState(\n          {\n            comment: \"\",\n          },\n          () => {\n            this.fetchComments();\n          }\n        );\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  fetchComments = () => {\n    fetch(commentUrl)\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant fetch comments\");\n        }\n        return res.json();\n      })\n      .then((comments) => {\n        this.setState({\n          comments: comments.comments,\n        });\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  render() {\n    let { comment, error } = this.state;\n    let formControlClass =\n      \"text-sm rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n\n    return (\n      <div className=\" w-1/3 mx-auto\">\n        {this.props.user ? (\n          <>\n            <form\n              onSubmit={(event) => {\n                event.preventDefault();\n                this.checkInput();\n                if (!error) {\n                  this.addComment();\n                }\n              }}\n            >\n              <span className=\"text-red-500 text-sm\">{this.state.error}</span>\n              <textarea\n                className={formControlClass}\n                placeholder=\"Write comment\"\n                rows={3}\n                onChange={this.handleInput}\n                value={comment}\n                name=\"comment\"\n              ></textarea>\n              <input\n                type=\"submit\"\n                value=\"Add Comment\"\n                className={`bg-blue-300 blue ${formControlClass}`}\n              ></input>\n            </form>\n          </>\n        ) : (\n          <NavLink to={\"/login\"}>\n            <p className=\"text-base m-4 text-center\">\n              <span className=\"text-green-500\">SignIn/SignUp</span> to add\n              <span className=\"text-green-500\"> Comment</span>\n            </p>\n          </NavLink>\n        )}\n        <div>\n          <h4 className=\"blue text-lg m-4 text-center\">Comments</h4>\n          {this.state.comments.map((comment, i) => {\n            return (\n              <SingleComment user={this.props.user} key={i} comment={comment} />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nclass SingleComment extends React.Component {\n  deleteComment = () => {\n    fetch(`${commentUrl}/${this.props.comment.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Token ${this.props.user.token}`,\n      },\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant delete comment\");\n        }\n        return res.json();\n      })\n      .then((comment) => {\n        console.log(comment);\n      });\n  };\n  render() {\n    return (\n      <div className=\"my-3 comment flex justify-between items-center\">\n        <div>\n          <p className=\"blue text-base\">{this.props.comment.body}</p>\n          <address className=\"text-xs capitalize\">\n            {this.props.comment.author.username}\n          </address>\n          <span className=\"text-xs -mt-4\">\n            {this.props.comment.createdAt.slice(0, 10)}\n          </span>\n        </div>\n        {this.props.user.username === this.props.comment.author.username ? (\n          <button onClick={this.deleteComment} className=\"text-red-500 text-xs\">\n            <i className=\"fa-solid fa-trash\"></i>\n          </button>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}